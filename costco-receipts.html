Drag me to your bookmarks bar: <a href="javascript:(async function() {const sleep = (ms = 1000) => new Promise(resolve => setTimeout(resolve, ms)); const receiptButtons = Array.from(document.querySelectorAll('button')) .filter(btn => btn.innerText === 'View Receipt'); if (!receiptButtons.length) { alert('No receipt buttons found! Be sure to visit Orders > Warehouse before running this.'); } else { let receiptsOut = ''; for (let btn of receiptButtons) { btn.click(); await sleep(); let receiptText = document.querySelector('.MuiDialog-root').innerText; if (receiptText.match(/^.+\nMember \d+\n(.+?)\tSUBTOTAL.+$/gs)) { let receiptItems = receiptText.replaceAll(/^.+\nMember \d+\n(.+?)\tSUBTOTAL.+$/gs, '$1'); console.log(receiptItems); receiptsOut += receiptItems; } await sleep(); } document.write('<pre>' + receiptsOut.replaceAll(/^\t/gm, '') + '</pre>'); }})()">Costco.ca Receipt Extractor</a>
